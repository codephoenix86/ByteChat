<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Axios Example</title>
    <!-- Include Axios from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/socket.io-client@4.8.1/dist/socket.io.min.js"></script>
  </head>
  <body>
    <h1>Join Chat</h1>
    <!-- <input type="text" id="messageInput" placeholder="Type your message" /> -->
    <input type="text" id="userInput" placeholder="Type your user id" />
    <button id="joinBtn">Join</button>

    <script>
      const chatId = '68e51f2a2de1882a6779fb8d' // example chat ID

      const token = ''
      document.getElementById('joinBtn').addEventListener('click', async () => {
        const userId = document.getElementById('userInput').value
        const socket = io('http://localhost:3000', { auth: { userId } })
        socket.on('message', data => {
          console.log(data)
        })

        // socket.emit('join-chat', { chatId, userId })
        // try {
        //   const response = await axios.post(
        //     `http://localhost:5000/api/chats/${chatId}/messages`,
        //     { content: message }, // request body
        //     {
        //       headers: {
        //         Authorization: `Bearer ${token}`, // <---- auth header
        //       },
        //     }
        //   )
        //   console.log('Message sent:', response.data)
        // } catch (error) {
        //   console.error(
        //     'Error sending message:',
        //     error.response ? error.response.data : error
        //   )
        // }
      })
    </script>
  </body>
</html>
